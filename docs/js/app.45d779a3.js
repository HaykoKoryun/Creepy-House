(function(e){function t(t){for(var i,r,o=t[0],c=t[1],u=t[2],l=0,m=[];l<o.length;l++)r=o[l],a[r]&&m.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},a={app:0},s=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("64a9"),a=n.n(i);a.a},"06f9":function(e,t,n){"use strict";var i=n("2da8"),a=n.n(i);a.a},"15a4":function(e,t,n){},"1c38":function(e,t,n){"use strict";var i=n("cdb5"),a=n.n(i);a.a},"2c0e":function(e,t,n){"use strict";var i=n("7b39"),a=n.n(i);a.a},"2da8":function(e,t,n){},"3b04":function(e,t,n){"use strict";var i=n("9fc7"),a=n.n(i);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.started?n("div",{attrs:{id:"bg"}}):e._e(),e.started?e._e():n("div",{attrs:{id:"start-bg"}}),e.started&&!e.gameOver?n("video",{attrs:{id:"party-video",loop:"",autoplay:""}},[n("source",{attrs:{src:"assets/video/bg.webm",type:"video/webm"}}),n("source",{attrs:{src:"assets/video/bg.mp4",type:"video/mp4"}}),n("source",{attrs:{src:"assets/video/bg.ogg",type:"video/ogg"}})]):e._e(),e.started||e.gameOver?e._e():n("MainMenu"),e.started&&!e.gameOver?n("game"):e._e(),e.gameOver?n("div",{attrs:{id:"gameOver"}},[e._v("\n    YOU LOSE!!!\n  ")]):e._e()],1)},s=[],r=n("2f62"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main-menu"}},[n("div",{attrs:{id:"start"},on:{click:function(t){e.$store.commit("start")}}},[e._v("\n    START\n  ")])])},c=[],u={name:"MainMenu"},d=u,l=(n("1c38"),n("2877")),m=Object(l["a"])(d,o,c,!1,null,"7902840b",null),h=m.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"game"}},[n("div",{attrs:{id:"status-panel"}},[e._v("\n    "+e._s(e.store.state.status)+"\n  ")]),n("canvas",{ref:"canvas",attrs:{id:"canvas",width:e.screenDimensions.width,height:e.screenDimensions.height}}),n("bar"),e.activeGuest?n("speech-bubble"):e._e()],1)},v=[],g=n("795b"),p=n.n(g),b=(n("ac6a"),n("96cf"),n("3b8d")),k=(n("7f7f"),n("912c")),w=(n("1e5c"),n("682a")),y=n.n(w),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"bar"}},[e._m(0),n("drinks-menu"),n("drink-on-bar")],1)},O=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"bar-striplights-container"}},[n("div",{attrs:{id:"bar-striplights"}})])}],C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"drinks-menu"}},e._l(e.drinks,function(e,t){return n("drink",{key:t,attrs:{drink:e}})}),1)},G=[],j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.componentStyle,attrs:{id:"drink"},on:{dblclick:e.use}},[n("div",{staticClass:"icon",style:e.iconStyle}),n("p",{staticClass:"title"},[e._v("\n    "+e._s(e.drink.name)+"\n  ")])])},x=[],M=new i["a"];M.on=function(e,t){M.$off(e),M.$on(e,t)},M.emit=M.$emit;var T=n("5d73"),E=n.n(T),L=n("d225"),S=n("b0b4"),D=[{name:"Golab",image:"01"},{name:"The Gold Fish",image:"02"},{name:"Poison Ivy",image:"03"},{name:"Horse's",image:"04"},{name:"Blue Nun",image:"05"},{name:"James Bond",image:"06"},{name:"Vlad's Favorite",image:"07"},{name:"Vitamin C++",image:"08"},{name:"A Bucket O' Water",image:"09"},{name:"Covfefe",image:"10"},{name:"Lenin's Lemon",image:"11"},{name:"Purple Haze",image:"12"}],$=D,I=1,z=1,A=1,B=[{image:"babushka",names:["Babayaga","Yulya","Elena"],size:I},{image:"vlad",names:["Vlad","Maximilian","Gary"],size:z},{image:"mummy",names:["Tuto","Puhupu","Huhu'k"],size:z},{image:"wolf",names:["Volk","Wolfy","Lenin"],size:A},{image:"moose",names:["The Rock","The Mountain","Hercules"],size:I},{image:"devil",names:["Lucifer","Satan","El Chupacabra"],size:A},{image:"fishy",names:["Fishlips","Slippy","Gimme'a'Kiss"],size:A},{image:"monkey",names:["Yeti","Vanilla Ice","MonkeyK"],size:I},{image:"frankenstein",names:["Frankie","Albert","Bob"],size:I}],P=B,W=["Nice one bro!","Thanks!","Merci!","Spasibo!","Swish!","Muchos gracias my amigo!"],F=["What is this?!","And you call yourself a friend!","Next time eh?!","Do you expect me to drink this?!","You can do better than this!","Oh come on!!!","Why? What did I do to deserve this!?","You got something wrong with your memory?"],H=["I guess I could just go and drink toilet water instead...","What do I need to do to get served around here?","Wow, just wow!!!","Thanks for nothing!!!","Well that was a nothingburger!!!"],N={good:W,bad:F,late:H},R=function(e){return e[Math.floor(Math.random()*e.length)]},V=1,U=2,Y=3,J="normal",K="angry",X="happy",q=function(){function e(t){Object(L["a"])(this,e),this.isActivated=!1,this.level=t;var n=R(P);for(var i in this.name=R(n.names),P)P[i].image==n.image&&P.splice(i,1);this.image=n.image,this.mood=J,this.stage=V,this.processLevel(this.level),this.chooseDrinks(),this.satisfaction=60,this.size=n.size}return Object(S["a"])(e,[{key:"useDrink",value:function(e){var t=!0,n=!1,i=void 0;try{for(var a,s=E()(this.drinks);!(t=(a=s.next()).done);t=!0){var r=a.value;if(r===e)return this.mood=X,this.noiceBro()}}catch(o){n=!0,i=o}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}return this.mood=K,this.damnIt()}},{key:"activate",value:function(){if(this.stage===V){for(var e="I want a ",t=0;t<this.drinks.length;t++){var n=this.drinks[t];0===t?e+=n:t===this.drinks.length-1?e+=" or ".concat(n,"."):e+=", ".concat(n)}return ne.commit("dialog",e),this.stage++}if(this.stage===U&&(ne.commit("dialog","Another one!"),Math.random()>.7&&this.stage++),this.stage===Y)return this.chooseDrinks(),this.level++,this.processLevel(this.level),this.stage=1,this.activate()}},{key:"chooseDrinks",value:function(){this.drinks=[];for(var e=0;e<this.drinkCount;e++){var t=R($).name;while(-1!==this.drinks.indexOf(t))t=R($).name;this.drinks.push(t)}}},{key:"processLevel",value:function(e){switch(e){case 1:this.drinkCount=3,this.good=30,this.bad=15,this.hmm=5;break;case 2:this.drinkCount=2,this.good=15,this.bad=30,this.hmm=20;break;case 3:this.drinkCount=1,this.good=10,this.bad=40,this.hmm=30;break;default:this.drinkCount=1,this.good=10,this.bad=40,this.hmm=30;break}}},{key:"noiceBro",value:function(){this.satisfaction+=this.good,this.satisfaction>100&&(this.satisfaction=100),ne.commit("dialog",R(N.good))}},{key:"damnIt",value:function(){this.satisfaction-=this.bad,Math.random()>.7&&(this.stage=V),ne.commit("dialog",R(N.bad))}},{key:"yourNotGonnaGetIt",value:function(){this.satisfaction-=this.hmm,ne.commit("dialog",R(N.late))}}]),e}();i["a"].use(r["a"]);var Q,Z,ee,te,ne=new r["a"].Store({state:{started:!1,dialog:"",drinks:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],guests:[new q(1),new q(1),new q(1),new q(1),new q(2),new q(2),new q(2),new q(3)],activeGuest:null,time:12,screenDimensions:{width:0,height:0},drink:null,gameOver:!1},mutations:{start:function(e){e.started=!0},updateSize:function(e,t){e.screenDimensions=t},activeGuest:function(e,t){e.activeGuest=t},leaveGuest:function(e,t){e.guests.splice(e.guests.indexOf(t),1)},useDrink:function(e,t){null!=e.drink&&null!=t||(e.drink=t)},dialog:function(e,t){e.dialog=t},changeTime:function(e){--e.time},gameOver:function(e){e.gameOver=!0}},actions:{}}),ie={name:"Drink",props:{drink:{type:Object,default:function(){return{}}}},methods:{use:function(){var e=this;e.$store.commit("useDrink",e.drink)}},computed:{iconStyle:function(){return'background-image: url("assets/drinks-icons/'.concat(this.drink.image,'.png")')},componentStyle:function(){return"\n        opacity: ".concat(null===ne.state.drink?"1":"0.6",";\n        cursor: ").concat(null===ne.state.drink?"pointer":"not-allowed",";\n      ")}}},ae=ie,se=(n("3b04"),Object(l["a"])(ae,j,x,!1,null,"3db267ec",null)),re=se.exports;function oe(e){e||(e=window.event),e.target&&"IMG"===e.target.nodeName?e.preventDefault():e.srcElement&&"IMG"===e.srcElement.nodeName&&(e.returnValue=!1),Q=e.clientX+te.scrollLeft,Z=0,0,ee=!0}function ce(e){!0===ee&&(e||(e=window.event),Z=Q-(e.clientX+te.scrollLeft),te.scrollLeft+=Z)}function ue(e){ee&&e.preventDefault(),ee=!1,e||(e=window.event);var t=1,n=function e(){var n=Math.sin(t);n<=0?window.cancelAnimationFrame(e):(te.scrollLeft+=Z*n,t-=.02,window.requestAnimationFrame(e))};n()}var de={name:"DrinksMenu",components:{Drink:re},data:function(){return{drinks:$}},mounted:function(){var e=document.getElementById("drinks-menu");te=e,e.addEventListener("mousedown",oe),e.addEventListener("mousemove",ce),e.addEventListener("mouseup",ue),e.addEventListener("mouseleave",function(){return ee=!1}),window.addEventListener("mouseup",function(){return ee=!1})}},le=de,me=(n("9bac"),Object(l["a"])(le,C,G,!1,null,"8b7b7f04",null)),he=me.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.drink?n("div",{style:e.iconStyle,attrs:{id:"drink-on-bar"}}):e._e()},ve=[],ge=n("cebc"),pe={name:"drink-on-bar",computed:Object(ge["a"])({iconStyle:function(){return'background-image: url("assets/drinks-on-bar/'.concat(this.drink.image,'.png")')}},Object(r["b"])(["drink"]))},be=pe,ke=(n("06f9"),Object(l["a"])(be,fe,ve,!1,null,"ef015762",null)),we=ke.exports,ye={name:"Bar",components:{DrinksMenu:he,DrinkOnBar:we}},_e=ye,Oe=(n("6eed"),Object(l["a"])(_e,_,O,!1,null,"7ceca58e",null)),Ce=Oe.exports,Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"speech-bubble"}},[n("div",{staticClass:"top"}),n("div",{staticClass:"bottom"}),n("div",{staticClass:"triangle"}),n("div",{staticClass:"name"},[e._v("\n    "+e._s(e.activeGuest.name)+"\n    "),n("div",{staticClass:"satisfaction"},e._l(5,function(t){return n("span",{key:t},[e.satisfaction>=t?[e._v("\n          🌟\n        ")]:[e._v("\n          ☆\n        ")]],2)}),0)]),n("div",{staticClass:"bubble"},[e._v("\n    "+e._s(e.dialog)+"\n  ")])])},je=[],xe={name:"speech-bubble",computed:Object(ge["a"])({satisfaction:function(){var e=this;return Math.floor(e.activeGuest.satisfaction/20)}},Object(r["b"])(["activeGuest","dialog"]))},Me=xe,Te=(n("b3ef"),Object(l["a"])(Me,Ge,je,!1,null,"fbd24a88",null)),Ee=Te.exports,Le=["babushka","mummy","vlad","wolf","moose","devil","fishy","monkey","frankenstein"],Se=["normal","happy","angry"],De=[];Le.forEach(function(e){Se.forEach(function(t){De.push({key:"".concat(e,"-").concat(t),URL:"assets/guests/".concat(e,"-").concat(t,".svg")})})});var $e,Ie=De,ze=function(e){return 1e3*e},Ae=ze(10),Be=ze(20),Pe=-1;function We(e){$e=e,Fe()}function Fe(){var e=R($e.state.guests);$e.commit("activeGuest",e),e.activate(),Ne(),Pe=setTimeout(He,Ae)}function He(){null===$e.state.drink?($e.state.activeGuest.yourNotGonnaGetIt(),Ne(),Pe=setTimeout(function(){$e.commit("useDrink",-1),He()},ze(4))):($e.commit("activeGuest",null),$e.commit("useDrink",null),Ne(),Pe=setTimeout(Fe,1e3))}function Ne(){-1!=Pe&&(clearTimeout(Pe),Pe=-1)}setInterval(function(){$e.commit("changeTime"),6===$e.state.time&&($e.state.guest.length>0?$e.commit("winGame"):$e.commit("gameOver"))},Be);var Re={name:"Game",data:function(){return{canvas:null,pixiApp:null,pixiLoader:null,guestContainer:null,ticker:null,store:ne}},computed:Object(r["b"])(["screenDimensions","activeGuest","dialog","drink","guests"]),components:{Bar:Ce,SpeechBubble:Ee},watch:{screenDimensions:function(e){var t=this,n=e.width/1920;t.pixiApp.stage.scale.set(n,n)},activeGuest:{deep:!0,handler:function(e,t){var n=this;if(0!=n.guestContainer.children.length&&n.guestContainer.removeChildren(),e){var i=new k["Sprite"](n.pixiLoader.resources["".concat(e.image,"-").concat(e.mood)].texture);i.scale.set(e.size),n.guestContainer.addChild(i),n.guestContainer.position.x=n.canvas.width/2,n.guestContainer.position.y=n.canvas.height-280,n.guestContainer.pivot=new k["Point"](i.width/2,i.height),n.guestContainer.fadeInTween._object.brightness=.05,n.guestContainer.alpha=1,e!=t&&n.guestContainer.fadeInTween.start()}}},drink:function(e){var t=this;e&&(t.activeGuest.useDrink(e.name),setTimeout(function(){t.activeGuest&&(t.activeGuest.satisfaction<=0&&t.$store.commit("leaveGuest",t.activeGuest),t.guestContainer.fadeOutTween._object.brightness=1,t.guestContainer.fadeOutTween._object.alpha=1,t.guestContainer.fadeOutTween.start())},2e3))},guests:function(e){var t=this;0==e.length&&t.$store.commit("gameOver")}},mounted:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.canvas=t.$refs.canvas,n=new k["Application"]({transparent:!0,width:1920,height:1080,view:t.canvas}),t.ticker=k["ticker"].shared,t.ticker.add(function(e){y.a.update(t.ticker.total),ne.state.status="".concat(ne.state.time,"AM. ").concat(ne.state.guests.length," Guests left")}),t.pixiApp=n,i=new k["loaders"].Loader,t.pixiLoader=i,Ie.forEach(function(e){i.add(e.key,e.URL)}),e.next=11,new p.a(function(e,a){i.load(function(i,a){var s=new k["Sprite"];t.guestContainer=s,n.stage.addChild(s);var r=[],o=new k["filters"].ColorMatrixFilter;r.push(o),o.brightness(.1,!1),s.filters=r;var c={brightness:.05},u={brightness:1,alpha:1},d=new y.a.Tween(c).to({brightness:1},1500).onUpdate(function(){o.brightness(c.brightness,!1)});s.fadeInTween=d;var l=new y.a.Tween(u).to({brightness:.05,alpha:0},1e3).onUpdate(function(){o.brightness(u.brightness,!1),s.alpha=u.alpha}).onComplete(He);s.fadeOutTween=l,e()})}).then(function(){var e=new Howl({src:"/assets/audio/bar-music.mp3",format:["mp3"]});e.on("load",function(){e.play(),e.loop(!0)})});case 11:We(t.$store);case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},Ve=Re,Ue=(n("2c0e"),Object(l["a"])(Ve,f,v,!1,null,"4c5a0974",null)),Ye=Ue.exports,Je={name:"app",components:{MainMenu:h,Game:Ye},computed:Object(r["b"])(["started","gameOver"]),mounted:function(){var e=this;e.$store.commit("updateSize",{width:window.innerWidth,height:window.innerHeight}),window.addEventListener("resize",function(){e.$store.commit("updateSize",{width:window.innerWidth,height:window.innerHeight})})},methods:{}},Ke=Je,Xe=(n("034f"),Object(l["a"])(Ke,a,s,!1,null,null,null)),qe=Xe.exports;i["a"].config.productionTip=!1,new i["a"]({store:ne,render:function(e){return e(qe)}}).$mount("#app")},"5c89":function(e,t,n){},"64a9":function(e,t,n){},"6eed":function(e,t,n){"use strict";var i=n("5c89"),a=n.n(i);a.a},"7b39":function(e,t,n){},"9bac":function(e,t,n){"use strict";var i=n("9db6"),a=n.n(i);a.a},"9db6":function(e,t,n){},"9fc7":function(e,t,n){},b3ef:function(e,t,n){"use strict";var i=n("15a4"),a=n.n(i);a.a},cdb5:function(e,t,n){}});
//# sourceMappingURL=app.45d779a3.js.map